<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th scope="col" class="sortable" (click)="onSort(SortColumn.Name)">
              Name @if (sortColumn === SortColumn.Name) {
              <i
                class="bi ms-1"
                [ngClass]="sortDirection === SortDirection.Asc ? 'bi-arrow-up' : 'bi-arrow-down'"
              ></i>
              }
            </th>
            <th scope="col">Description</th>
            <th scope="col" class="sortable" (click)="onSort(SortColumn.CreatedAt)">
              Created At @if (sortColumn === SortColumn.CreatedAt) {
              <i
                class="bi ms-1"
                [ngClass]="sortDirection === SortDirection.Asc ? 'bi-arrow-up' : 'bi-arrow-down'"
              ></i>
              }
            </th>
            <th scope="col" class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Empty State -->
          @if (projects.length === 0) {
          <tr>
            <td colspan="4" class="text-center text-muted py-4">
              <i class="bi bi-inbox" style="font-size: 3rem"></i>
              <p class="mt-2">No projects yet. Create your first project!</p>
            </td>
          </tr>
          }

          <!-- Project Rows -->
          @for (project of projects; track project.id) {
          <tr style="cursor: pointer" (click)="onViewDetails(project.id)">
            <td>
              <strong>{{ project.name }}</strong>
            </td>
            <td>
              <span class="text-muted">
                {{ project.description || 'No description' }}
              </span>
            </td>
            <td>
              {{ project.createdAt | date : 'short' }}
            </td>
            <td class="text-end">
              <span class="d-flex justify-content-end">
                <button
                  class="btn btn-sm btn-outline-primary me-2"
                  (click)="onViewDetails(project.id)"
                  title="View Details"
                >
                  <i class="bi bi-eye"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-danger"
                  (click)="onDeleteProject(project, $event)"
                  title="Delete Project"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </span>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
